---
title: "타이머, 인터럽트, 입출력장치 동작원리"
category: "CS"
date: "2022-12-05"
tags: ["운영체제", "시스템구조"]
thumbnail: ""
---

## timer

<aside>

✔️ 특정 프로그램이 CPU를 독점하는 것을 막아줌

✔️ 정해진 시간이 흐른 뒤 OS에게 제어권이 넘어가도록 인터럽트를 발생시킴

✔️ 타이머 값이 0이 되면 타이머 인터럽트 발생

</aside>

처음 부팅 시 OS가 CPU를 점유하고 있다가, 필요한 프로그램에게 넘겨주는데

특정 프로그램이 무한정 CPU를 사용하고 있으면 다른 프로그램이 실행되지 못하므로

`timer`라는 시스템을 사용해서 처음 CPU를 넘겨줄 때 아주 짧은 제한 시간을 걸어준다.
<br><br>
`timer`가 끝나면 프로그램은 자동으로 다시 CPU 제어권을 운영체제에게 넘겨주게 되고

운영체제는 또 다른 프로그램에 `timer`를 걸어서 CPU를 사용하게 해준다.
<br><br>

## 입출력장치(I/O) 동작원리

메모리에 적재된 프로그램들은 I/O 장치에 접근하거나 제어할 권한이 없다.

모든 I/O 장치 실행은 OS에 의해 이루어진다.

프로그램이 CPU 제어권을 OS에 넘겨주면 OS가 I/O 장치에 작업을 명령해놓는다.

I/O 장치가 작업을 처리하기까지 대기하는 동안 다른 프로그램에게 CPU를 넘겨준다.
<br><br>
I/O 장치가 요청한 작업을 끝내면 CPU에 인터럽트를 걸어 잠깐 실행중이던 다른 프로그램을 중지시키고,

OS가 입출력된 데이터를 메모리에 적재시켜 놓는다.
<br><br>
바로 다시 입출력을 요청했던 프로그램에게 CPU 제어권을 주는 것은 아니고,

일단 데이터만 메모리에 올려놓고 그 프로그램이 자기 차례가 되면 CPU를 다시 사용한다.
<br><br>

## mode bit

<aside>

✔️ CPU 제어권이 누구에게(OS 혹은 프로그램) 있는지 확인해준다.

</aside>

- 1: 사용자 모드

  - 사용자 프로그램 수행

- 0: 모니터 모드

  - OS 코드 수행

<br>

## DMA Controller

CPU가 너무 많은 인터럽트를 당해서 오버헤드가 증가하는 것을 막기 위해 동작하는 장치다.

DMA Controller가 입력장치로부터 입력받은 데이터를 1byte 단위로 받아서 1block이 다 찼을 때 CPU에 넘겨준다.

<br>

## Device Controller

각 장치를 통제하는 일종의 작은 CPU

<br>

## Device Drive

OS 코드 중 각 장치별 처리루틴

<br>

## 인터럽트

- 인터럽트: 하드웨어가 발생시킨 인터럽트
- 트랩: 소프트웨어가 발생시킨 인터럽트
  - Exception: 프로그램이 오류를 범한 경우
  - 시스템 콜: 프로그램이 OS의 도움을 받기 위해 커널함수를 호출하는 경우

<br>

### **Q. I/O 요청을 처리할 때 발생하는 인터럽트의 종류는?**

➡ 프로그램이 I/O 처리를 요청할 때에는 트랩(소프트웨어 인터럽트)가 발생하고, I/O 처리가 끝나고 데이터를 받아올 땐 하드웨어 인터럽트가 발생하므로 두 종류 다 발생한다.
<br><br>

> 출처: https://core.ewha.ac.kr/publicview/C0101020140311132925816476?vmode=f
